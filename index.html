<html>
  <head>
    <script src="https://www.gstatic.com/realtime/realtime-client-utils.js">  </script>
    <script type="text/javascript">

const CLIENT_ID = '835615821089-0mmun003p819e379vpurms6f1joj33qk.apps.googleusercontent.com';
const SCOPES = ["https://www.googleapis.com/auth/spreadsheets.readonly"];

var rt_utils = new utils.RealtimeUtils({clientId: CLIENT_ID});

/*global*/ arghablargha = function() {
  gapi.auth.authorize({
    client_id: CLIENT_ID,
    scope: SCOPES.join(''),
    immediate: true
  }, handle_auth_result);
};

const handle_auth_result = function(auth_result) {
  const authorize_div = document.getElementById('authorize-div');
  if(auth_result && !auth_result.error) {
    authorize_div.style.display = 'none';
    start_the_application();
  } else {
    authorize_div.style.display = 'inline';
    const authorize_button = document.getElementById('authorize-button');
    authorize_button.onclick = function(_) {
      gapi.auth.authorize({
        client_id: CLIENT_ID,
        scope: SCOPES,
        immediate: false
      }, handle_auth_result);
      return false;
    };
  }
};

var start_the_application = function() {
  rt_utils.createRealtimeFile('Temp', function(r) {
    console.log(r.id);
  });
};

    </script>
    <script src="https://apis.google.com/js/client.js?onload=arghablargha">  </script>
  </head>
  <body>
    successfully updated 3
    <br />
    <div id="authorize-div" style="display: none">
      <span>Authorize access to Drive API</span>
      <!--Button for the user to click to initiate auth sequence -->
      <button id="authorize-button">
        Authorize
      </button>
    </div>
    <pre id="output"></pre>
  </body>
</html>
